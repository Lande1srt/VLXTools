<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha512-SfTiTlX6kk+qitfevl/7LibUOeJWlt9rbyDn92a1DqWOw9vWG2MFoays0sgObmWazO5BQPiFucnnEAjpAB+/Sw==" crossorigin="anonymous" referrerpolicy="no-referrer" />
  
  <!-- Tailwind配置 -->
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            primary: '#4f46e5',
            weak: '#ef4444',
            medium: '#f59e0b',
            strong: '#10b981',
            surface: '#f0f4f8',
            text: '#334155'
          },
        }
      }
    }
  </script>
  
  <style type="text/tailwindcss">
    @layer utilities {
      /* .neumorphic {
        box-shadow: 8px 8px 16px rgba(163, 177, 198, 0.6),
                    -8px -8px 16px rgba(255, 255, 255, 0.8);
      } */
      .neumorphic-inset {
        box-shadow: inset 4px 4px 8px rgba(163, 177, 198, 0.6),
                    inset -4px -4px 8px rgba(255, 255, 255, 0.8);
      }
      .neumorphic-btn {
        box-shadow: 5px 5px 10px rgba(163, 177, 198, 0.6),
                    -5px -5px 10px rgba(255, 255, 255, 0.8);
        transition: all 0.2s ease;
      }
      .neumorphic-btn:hover {
        box-shadow: 6px 6px 12px rgba(163, 177, 198, 0.7),
                    -6px -6px 12px rgba(255, 255, 255, 0.9);
        transform: translateY(-2px);
      }
      .neumorphic-btn:active {
        box-shadow: inset 3px 3px 6px rgba(163, 177, 198, 0.6),
                    inset -3px -3px 6px rgba(255, 255, 255, 0.8);
      }
      .strength-bar {
        transition: width 0.3s ease, background-color 0.3s ease;
      }
    }
  </style>
</head>
<body class="bg-surface min-h-screen font-sans text-text p-4 md:p-6 flex items-center justify-center">
  <div class="max-w-md w-full w-full">
    <!-- 标题区域 -->
    <div class="text-center mb-8">
      <h1 class="text-[clamp(1.8rem,5vw,2.2rem)] font-bold mb-2 flex items-center justify-center">
        <i class="fa fa-shield text-primary mr-2"></i>密码强度分析仪
      </h1>
      <p class="text-gray-600">实时检测密码安全等级和建议</p>
    </div>
    
    <!-- 主内容区 -->
    <div class="bg-surface rounded-2xl p-6 md:p-8 neumorphic">
      <!-- 密码输入区域 -->
      <div class="mb-6">
        <label for="password" class="block text-sm font-medium mb-2 flex items-center">
          <i class="fa fa-lock text-primary mr-2"></i>输入密码
        </label>
        <div class="relative">
          <input 
            type="password" 
            id="password" 
            class="w-full bg-surface rounded-xl p-4 neumorphic-inset focus:outline-none focus:ring-2 focus:ring-primary/30 pr-12"
            placeholder="请输入密码进行强度分析"
          >
          <button id="toggleVisibility" class="absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 hover:text-primary">
            <i class="fa fa-eye-slash"></i>
          </button>
        </div>
      </div>
      
      <!-- 强度指示器 -->
      <div class="mb-6">
        <label class="block text-sm font-medium mb-2 flex items-center">
          <i class="fa fa-tachometer text-primary mr-2"></i>密码强度
        </label>
        <div class="bg-surface rounded-xl p-4 neumorphic-inset">
          <!-- 强度条 -->
          <div class="h-3 w-full bg-gray-200 rounded-full overflow-hidden mb-3">
            <div id="strengthBar" class="strength-bar h-full w-0 rounded-full bg-weak"></div>
          </div>
          
          <!-- 强度文本 -->
          <div class="flex justify-between items-center">
            <span id="strengthText" class="font-medium text-weak">请输入密码</span>
            <span id="strengthScore" class="text-sm text-gray-500">0/100</span>
          </div>
        </div>
      </div>
      
      <!-- 分析详情和建议 -->
      <div class="bg-surface rounded-xl p-4 neumorphic-inset mb-6">
        <h3 class="font-medium mb-3 flex items-center">
          <i class="fa fa-lightbulb-o text-primary mr-2"></i>安全建议
        </h3>
        <ul id="suggestions" class="space-y-2 text-sm text-gray-600">
          <li class="flex items-start">
            <i class="fa fa-circle-o text-gray-400 mt-1 mr-2 text-xs"></i>
            <span>密码长度至少8个字符</span>
          </li>
          <li class="flex items-start">
            <i class="fa fa-circle-o text-gray-400 mt-1 mr-2 text-xs"></i>
            <span>包含大写字母（A-Z）和小写字母（a-z）</span>
          </li>
          <li class="flex items-start">
            <i class="fa fa-circle-o text-gray-400 mt-1 mr-2 text-xs"></i>
            <span>包含数字（0-9）</span>
          </li>
          <li class="flex items-start">
            <i class="fa fa-circle-o text-gray-400 mt-1 mr-2 text-xs"></i>
            <span>包含特殊字符（如!@#$%等）</span>
          </li>
          <li class="flex items-start">
            <i class="fa fa-circle-o text-gray-400 mt-1 mr-2 text-xs"></i>
            <span>避免使用常见密码或连续字符（如123456）</span>
          </li>
        </ul>
      </div>
      
      <!-- 密码强度评分详情 -->
      <div class="bg-surface rounded-xl p-4 neumorphic-inset">
        <h3 class="font-medium mb-3 flex items-center">
          <i class="fa fa-bar-chart text-primary mr-2"></i>评分详情
        </h3>
        <div class="space-y-2 text-sm">
          <div class="flex justify-between">
            <span class="text-gray-600">长度得分</span>
            <span id="lengthScore" class="font-medium">0/30</span>
          </div>
          <div class="flex justify-between">
            <span class="text-gray-600">复杂度得分</span>
            <span id="complexityScore" class="font-medium">0/40</span>
          </div>
          <div class="flex justify-between">
            <span class="text-gray-600">唯一性得分</span>
            <span id="uniquenessScore" class="font-medium">0/30</span>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script>
// 常见弱密码列表（用于检测常见密码）
const commonPasswords = [
  "123456", "123456789", "12345", "qwerty", "password", 
  "12345678", "1234", "1234567", "123123", "abc123",
  "111111", "1234567890", "qwerty123", "qwertyuiop", "password1",
  "admin", "welcome", "login", "123qwe", "1q2w3e4r"
];

// DOM元素获取
const passwordInput = document.getElementById('password');
const toggleVisibility = document.getElementById('toggleVisibility');
const strengthBar = document.getElementById('strengthBar');
const strengthText = document.getElementById('strengthText');
const strengthScore = document.getElementById('strengthScore');
const lengthScoreEl = document.getElementById('lengthScore');
const complexityScoreEl = document.getElementById('complexityScore');
const uniquenessScoreEl = document.getElementById('uniquenessScore');
const suggestions = document.getElementById('suggestions').querySelectorAll('li');

// 切换密码可见性
toggleVisibility.addEventListener('click', () => {
  const type = passwordInput.getAttribute('type') === 'password' ? 'text' : 'password';
  passwordInput.setAttribute('type', type);
  toggleVisibility.innerHTML = type === 'password' ? 
    '<i class="fa fa-eye-slash"></i>' : 
    '<i class="fa fa-eye"></i>';
});

// 密码强度分析核心函数
function analyzePasswordStrength(password) {
  // 初始化分数
  let totalScore = 0;
  let lengthScore = 0;
  let complexityScore = 0;
  let uniquenessScore = 0;
  
  // 密码为空时直接返回全0分数
  if (password.length === 0) {
    return {
      totalScore: 0,
      lengthScore: 0,
      complexityScore: 0,
      uniquenessScore: 0,
      hasUpperCase: false,
      hasLowerCase: false,
      hasNumbers: false,
      hasSymbols: false,
      isCommonPassword: false,
      hasSequentialPatterns: false,
      hasRepeatingPatterns: false
    };
  }
  
  // 1. 长度评分 (0-30分)
  if (password.length >= 12) {
    lengthScore = 30; // 12位以上满分
  } else if (password.length >= 8) {
    lengthScore = 20 + (password.length - 8) * 2; // 8-11位按长度递增
  } else {
    lengthScore = Math.min(password.length * 3, 20); // 1-7位低分，最高20
  }
  
  // 2. 复杂度评分 (0-40分)
  const hasUpperCase = /[A-Z]/.test(password);
  const hasLowerCase = /[a-z]/.test(password);
  const hasNumbers = /\d/.test(password);
  const hasSymbols = /[^A-Za-z0-9]/.test(password);
  
  // 计算字符类型数量
  const charTypeCount = [hasUpperCase, hasLowerCase, hasNumbers, hasSymbols].filter(Boolean).length;
  
  // 基础字符类型评分 (最高20分)
  complexityScore = charTypeCount * 5;
  
  // 混合使用奖励 (最高20分)
  if (charTypeCount >= 3) {
    complexityScore += 10;
    if (charTypeCount === 4) {
      complexityScore += 10; // 四种类型全包含额外奖励
    }
  }
  
  // 3. 唯一性评分 (0-30分)
  // 检查是否为常见密码
  const isCommonPassword = commonPasswords.some(p => 
    password.toLowerCase() === p.toLowerCase()
  );
  
  if (isCommonPassword) {
    uniquenessScore = 0; // 常见密码得0分
  } else {
    // 检查连续字符模式 (如1234, abcd等)
    const hasSequentialPatterns = /(0123|1234|2345|3456|4567|5678|6789|7890|abcd|bcde|cdef|defg|efgh|fghij|zyxw|wvut)/i.test(password);
    
    // 检查重复字符模式 (如aaaa, 1111等)
    const hasRepeatingPatterns = /(.)\1{3,}/.test(password);
    
    if (hasSequentialPatterns || hasRepeatingPatterns) {
      uniquenessScore = 10; // 有模式但不是常见密码
    } else {
      uniquenessScore = 30; // 无明显模式，得满分
    }
  }
  
  // 计算总分
  totalScore = lengthScore + complexityScore + uniquenessScore;
  
  return {
    totalScore,
    lengthScore,
    complexityScore,
    uniquenessScore,
    hasUpperCase,
    hasLowerCase,
    hasNumbers,
    hasSymbols,
    isCommonPassword,
    hasSequentialPatterns: /(0123|1234|2345|3456|4567|5678|6789|7890|abcd|bcde|cdef|defg|efgh|fghij|zyxw|wvut)/i.test(password),
    hasRepeatingPatterns: /(.)\1{3,}/.test(password)
  };
}

// 更新UI显示
function updateUI(results) {
  const { 
    totalScore, lengthScore, complexityScore, uniquenessScore,
    hasUpperCase, hasLowerCase, hasNumbers, hasSymbols,
    isCommonPassword, hasSequentialPatterns, hasRepeatingPatterns
  } = results;
  
  // 更新强度条和总分
  strengthBar.style.width = `${totalScore}%`;
  strengthScore.textContent = `${totalScore}/100`;
  
  // 更新分项分数
  lengthScoreEl.textContent = `${lengthScore}/30`;
  complexityScoreEl.textContent = `${complexityScore}/40`;
  uniquenessScoreEl.textContent = `${uniquenessScore}/30`;
  
  // 确定强度等级和颜色
  let strengthLevel, strengthColor, barColor;
  if (totalScore === 0) {
    strengthLevel = '请输入密码';
    strengthColor = 'text-gray-500';
    barColor = 'bg-gray-300';
  } else if (totalScore < 40) {
    strengthLevel = '弱';
    strengthColor = 'text-red-500';
    barColor = 'bg-red-500';
  } else if (totalScore < 70) {
    strengthLevel = '中';
    strengthColor = 'text-yellow-500';
    barColor = 'bg-yellow-500';
  } else {
    strengthLevel = '强';
    strengthColor = 'text-green-500';
    barColor = 'bg-green-500';
  }
  
  // 更新强度文本和样式
  strengthText.textContent = strengthLevel;
  strengthText.className = `font-medium ${strengthColor}`;
  strengthBar.className = `strength-bar h-full rounded-full ${barColor}`;
  
  // 更新建议列表状态
  // 长度建议
  suggestions[0].querySelector('i').className = 
    passwordInput.value.length >= 8 ? 'fa fa-check text-green-500 mt-1 mr-2 text-xs' : 'fa fa-times text-red-500 mt-1 mr-2 text-xs';
  
  // 大小写混合建议
  suggestions[1].querySelector('i').className = 
    (hasUpperCase && hasLowerCase) ? 'fa fa-check text-green-500 mt-1 mr-2 text-xs' : 'fa fa-times text-red-500 mt-1 mr-2 text-xs';
  
  // 数字建议
  suggestions[2].querySelector('i').className = 
    hasNumbers ? 'fa fa-check text-green-500 mt-1 mr-2 text-xs' : 'fa fa-times text-red-500 mt-1 mr-2 text-xs';
  
  // 特殊字符建议
  suggestions[3].querySelector('i').className = 
    hasSymbols ? 'fa fa-check text-green-500 mt-1 mr-2 text-xs' : 'fa fa-times text-red-500 mt-1 mr-2 text-xs';
  
  // 唯一性建议
  suggestions[4].querySelector('i').className = 
    (passwordInput.value.length === 0) ? 'fa fa-times text-red-500 mt-1 mr-2 text-xs' :
    (!isCommonPassword && !hasSequentialPatterns && !hasRepeatingPatterns) ? 
    'fa fa-check text-green-500 mt-1 mr-2 text-xs' : 'fa fa-times text-red-500 mt-1 mr-2 text-xs';
}

// 输入监听
passwordInput.addEventListener('input', () => {
  const results = analyzePasswordStrength(passwordInput.value);
  updateUI(results);
});

// 初始化UI
updateUI({
  totalScore: 0,
  lengthScore: 0,
  complexityScore: 0,
  uniquenessScore: 0,
  hasUpperCase: false,
  hasLowerCase: false,
  hasNumbers: false,
  hasSymbols: false,
  isCommonPassword: false,
  hasSequentialPatterns: false,
  hasRepeatingPatterns: false
});
</script>
</body>
</html>