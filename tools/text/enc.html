<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>文本加密工具</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
    
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#3b82f6',
                        success: '#10b981',
                        neutral: '#f0f4f8',
                    },
                    fontFamily: {
                        inter: ['Inter', 'system-ui', 'sans-serif'],
                    },
                }
            }
        }
    </script>
    
    <style type="text/tailwindcss">
        @layer utilities {
            .neumorphic {
                box-shadow: 6px 6px 12px rgba(163, 177, 198, 0.6),
                           -6px -6px 12px rgba(255, 255, 255, 0.8);
            }
            .neumorphic-inset {
                box-shadow: inset 4px 4px 8px rgba(163, 177, 198, 0.6),
                           inset -4px -4px 8px rgba(255, 255, 255, 0.8);
            }
            .neumorphic-btn {
                box-shadow: 5px 5px 10px rgba(163, 177, 198, 0.6),
                           -5px -5px 10px rgba(255, 255, 255, 0.8);
                transition: all 0.2s ease;
            }
            .neumorphic-btn:hover {
                box-shadow: 7px 7px 14px rgba(163, 177, 198, 0.7),
                           -7px -7px 14px rgba(255, 255, 255, 0.9);
                transform: translateY(-2px);
            }
            .neumorphic-btn:active {
                box-shadow: inset 4px 4px 8px rgba(163, 177, 198, 0.6),
                           inset -4px -4px 8px rgba(255, 255, 255, 0.8);
                transform: translateY(0);
            }
            .custom-select {
                appearance: none;
                background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='%236b7280' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E");
                background-repeat: no-repeat;
                background-position: right 12px center;
                background-size: 16px;
            }
        }
    </style>
</head>
<body class="bg-neutral min-h-screen font-inter p-4 text-gray-700">
    <div class="max-w-2xl mx-auto">
        <h1 class="text-[clamp(1.5rem,3vw,2rem)] font-bold text-center mb-6 text-primary">文本加密工具</h1>
        
        <!-- 操作选择 -->
        <div class="mb-6">
            <div class="neumorphic rounded-xl p-1 inline-block">
                <button id="encrypt-btn" class="neumorphic-btn px-6 py-3 rounded-lg font-medium text-primary">加密</button>
                <button id="decrypt-btn" class="px-6 py-3 rounded-lg font-medium text-gray-600">解密</button>
            </div>
        </div>
        
        <!-- 算法选择 -->
        <div class="mb-6">
            <label class="block mb-2 font-medium">加密算法</label>
            <div class="neumorphic rounded-xl p-1">
                <select id="algorithm" class="custom-select w-full bg-transparent border-none outline-none p-3 rounded-lg">
                    <option value="aes">AES (Advanced Encryption Standard)</option>
                    <option value="des">DES (Data Encryption Standard)</option>
                    <option value="tripledes">3DES (Triple DES)</option>
                    <option value="rabbit">Rabbit</option>
                    <option value="rc4">RC4</option>
                </select>
            </div>
        </div>
        
        <!-- 密钥输入 -->
        <div class="mb-6">
            <label class="block mb-2 font-medium">密钥 (Key)</label>
            <div class="neumorphic-inset rounded-xl p-4">
                <input type="password" id="key" class="w-full bg-transparent border-none outline-none" placeholder="请输入加密/解密密钥">
            </div>
        </div>
        
        <!-- 输入区域 -->
        <div class="mb-6">
            <label class="block mb-2 font-medium" id="input-label">明文 (待加密文本)</label>
            <div class="neumorphic-inset rounded-xl p-4">
                <textarea id="input-text" rows="4" class="w-full bg-transparent border-none outline-none resize-none" placeholder="请输入要加密的文本..."></textarea>
            </div>
        </div>
        
        <!-- 结果区域 -->
        <div class="mb-6">
            <label class="block mb-2 font-medium" id="result-label">密文 (加密结果)</label>
            <div class="neumorphic-inset rounded-xl p-4 relative">
                <textarea id="result-text" rows="4" class="w-full bg-transparent border-none outline-none resize-none" placeholder="处理结果将显示在这里..." readonly></textarea>
                <button id="copy-btn" class="absolute right-3 bottom-3 neumorphic-btn w-8 h-8 rounded-full flex items-center justify-center text-primary">
                    <i class="fa fa-copy"></i>
                </button>
            </div>
        </div>
        
        <!-- 执行按钮 -->
        <button id="execute-btn" class="neumorphic-btn w-full py-3 rounded-xl flex items-center justify-center gap-2 text-primary font-medium text-lg">
            <i class="fa fa-lock"></i>
            <span id="action-text">执行加密</span>
        </button>
        
        <script>
            // DOM元素
            const encryptBtn = document.getElementById('encrypt-btn');
            const decryptBtn = document.getElementById('decrypt-btn');
            const algorithmSelect = document.getElementById('algorithm');
            const keyInput = document.getElementById('key');
            const inputText = document.getElementById('input-text');
            const resultText = document.getElementById('result-text');
            const executeBtn = document.getElementById('execute-btn');
            const copyBtn = document.getElementById('copy-btn');
            const inputLabel = document.getElementById('input-label');
            const resultLabel = document.getElementById('result-label');
            const actionText = document.getElementById('action-text');
            
            // 当前模式：encrypt/decrypt
            let currentMode = 'encrypt';
            
            // 加密函数
            function encrypt(text, key, algorithm) {
                if (!text || !key) return '';
                
                try {
                    switch (algorithm) {
                        case 'aes':
                            return CryptoJS.AES.encrypt(text, key).toString();
                        case 'des':
                            return CryptoJS.DES.encrypt(text, key).toString();
                        case 'tripledes':
                            return CryptoJS.TripleDES.encrypt(text, key).toString();
                        case 'rabbit':
                            return CryptoJS.Rabbit.encrypt(text, key).toString();
                        case 'rc4':
                            return CryptoJS.RC4.encrypt(text, key).toString();
                        default:
                            return CryptoJS.AES.encrypt(text, key).toString();
                    }
                } catch (e) {
                    alert('加密失败: ' + e.message);
                    return '';
                }
            }
            
            // 解密函数
            function decrypt(ciphertext, key, algorithm) {
                if (!ciphertext || !key) return '';
                
                try {
                    switch (algorithm) {
                        case 'aes':
                            const aesBytes = CryptoJS.AES.decrypt(ciphertext, key);
                            return aesBytes.toString(CryptoJS.enc.Utf8);
                        case 'des':
                            const desBytes = CryptoJS.DES.decrypt(ciphertext, key);
                            return desBytes.toString(CryptoJS.enc.Utf8);
                        case 'tripledes':
                            const tripleDesBytes = CryptoJS.TripleDES.decrypt(ciphertext, key);
                            return tripleDesBytes.toString(CryptoJS.enc.Utf8);
                        case 'rabbit':
                            const rabbitBytes = CryptoJS.Rabbit.decrypt(ciphertext, key);
                            return rabbitBytes.toString(CryptoJS.enc.Utf8);
                        case 'rc4':
                            const rc4Bytes = CryptoJS.RC4.decrypt(ciphertext, key);
                            return rc4Bytes.toString(CryptoJS.enc.Utf8);
                        default:
                            const defaultBytes = CryptoJS.AES.decrypt(ciphertext, key);
                            return defaultBytes.toString(CryptoJS.enc.Utf8);
                    }
                } catch (e) {
                    alert('解密失败: 可能是密钥错误或密文损坏');
                    return '';
                }
            }
            
            // 执行加密/解密
            function executeAction() {
                const text = inputText.value.trim();
                const key = keyInput.value.trim();
                const algorithm = algorithmSelect.value;
                
                if (!text) {
                    alert(currentMode === 'encrypt' ? '请输入要加密的文本' : '请输入要解密的文本');
                    return;
                }
                
                if (!key) {
                    alert('请输入密钥');
                    return;
                }
                
                if (currentMode === 'encrypt') {
                    resultText.value = encrypt(text, key, algorithm);
                } else {
                    resultText.value = decrypt(text, key, algorithm);
                }
            }
            
            // 复制结果
            function copyResult() {
                if (!resultText.value) return;
                
                resultText.select();
                document.execCommand('copy');
                
                // 显示复制反馈
                const originalIcon = copyBtn.innerHTML;
                copyBtn.innerHTML = '<i class="fa fa-check"></i>';
                setTimeout(() => {
                    copyBtn.innerHTML = originalIcon;
                }, 2000);
            }
            
            // 切换模式
            function switchToEncrypt() {
                currentMode = 'encrypt';
                inputLabel.textContent = '明文 (待加密文本)';
                resultLabel.textContent = '密文 (加密结果)';
                actionText.textContent = '执行加密';
                inputText.placeholder = '请输入要加密的文本...';
                resultText.value = '';
                
                // 更新按钮样式
                encryptBtn.classList.add('neumorphic-btn', 'text-primary');
                encryptBtn.classList.remove('text-gray-600');
                decryptBtn.classList.remove('neumorphic-btn', 'text-primary');
                decryptBtn.classList.add('text-gray-600');
            }
            
            function switchToDecrypt() {
                currentMode = 'decrypt';
                inputLabel.textContent = '密文 (待解密文本)';
                resultLabel.textContent = '明文 (解密结果)';
                actionText.textContent = '执行解密';
                inputText.placeholder = '请输入要解密的文本...';
                resultText.value = '';
                
                // 更新按钮样式
                decryptBtn.classList.add('neumorphic-btn', 'text-primary');
                decryptBtn.classList.remove('text-gray-600');
                encryptBtn.classList.remove('neumorphic-btn', 'text-primary');
                encryptBtn.classList.add('text-gray-600');
            }
            
            // 事件监听
            encryptBtn.addEventListener('click', switchToEncrypt);
            decryptBtn.addEventListener('click', switchToDecrypt);
            executeBtn.addEventListener('click', executeAction);
            copyBtn.addEventListener('click', copyResult);
            
            // 快捷键支持
            inputText.addEventListener('keydown', (e) => {
                if (e.key === 'Enter' && e.ctrlKey) {
                    executeAction();
                }
            });
            
            // 初始化
            switchToEncrypt();
        </script>
    </div>
</body>
</html>