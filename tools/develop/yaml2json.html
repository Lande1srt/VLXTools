<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>YAML-JSON 转换器</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/js-yaml@4.1.0/dist/js-yaml.min.js"></script>
    
    <!-- 配置Tailwind自定义主题 -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#6366f1',
                        secondary: '#8b5cf6',
                        neutral: '#f3f4f6',
                        dark: '#1f2937'
                    },
                    fontFamily: {
                        inter: ['Inter', 'system-ui', 'sans-serif'],
                    },
                    boxShadow: {
                        'neumorphic': '9px 9px 16px rgba(163, 177, 198, 0.6), -9px -9px 16px rgba(255, 255, 255, 0.5)',
                        'neumorphic-inset': 'inset 5px 5px 10px rgba(163, 177, 198, 0.6), inset -5px -5px 10px rgba(255, 255, 255, 0.5)',
                        'neumorphic-sm': '5px 5px 10px rgba(163, 177, 198, 0.6), -5px -5px 10px rgba(255, 255, 255, 0.5)',
                    }
                },
            }
        }
    </script>
    
    <style type="text/tailwindcss">
        @layer utilities {
            .content-auto {
                content-visibility: auto;
            }
            .neumorphic {
                box-shadow: 9px 9px 16px rgba(163, 177, 198, 0.6), -9px -9px 16px rgba(255, 255, 255, 0.5);
                background-color: #f0f4f8;
                border-radius: 16px;
            }
            .neumorphic-inset {
                box-shadow: inset 5px 5px 10px rgba(163, 177, 198, 0.6), inset -5px -5px 10px rgba(255, 255, 255, 0.5);
                background-color: #f0f4f8;
                border-radius: 12px;
            }
            .neumorphic-btn {
                box-shadow: 5px 5px 10px rgba(163, 177, 198, 0.6), -5px -5px 10px rgba(255, 255, 255, 0.5);
                background-color: #f0f4f8;
                border-radius: 8px;
                transition: all 0.2s ease;
            }
            .neumorphic-btn:hover {
                box-shadow: 7px 7px 14px rgba(163, 177, 198, 0.7), -7px -7px 14px rgba(255, 255, 255, 0.6);
                transform: translateY(-2px);
            }
            .neumorphic-btn:active {
                box-shadow: inset 5px 5px 10px rgba(163, 177, 198, 0.6), inset -5px -5px 10px rgba(255, 255, 255, 0.5);
                transform: translateY(0);
            }
            .text-gradient {
                background-clip: text;
                -webkit-background-clip: text;
                color: transparent;
                background-image: linear-gradient(135deg, #6366f1, #8b5cf6);
            }
        }
    </style>
</head>
<body class="bg-neutral min-h-screen font-inter p-4 md:p-6 lg:p-8">
    <div class="max-w-7xl mx-auto">
        <!-- 标题区域 -->
        <header class="text-center mb-6 md:mb-8">
            <h1 class="text-[clamp(1.8rem,4vw,2.5rem)] font-bold text-gradient">YAML-JSON 转换器</h1>
            <p class="text-gray-600 mt-2">轻松实现 YAML 与 JSON 格式之间的相互转换</p>
        </header>
        
        <!-- 主内容区域 - 关键修改：使用md断点确保PC端始终左右布局 -->
        <main class="flex flex-col md:flex-row gap-6">
            <!-- YAML 输入区域 -->
            <section class="w-full md:w-1/2 neumorphic p-5">
                <div class="flex justify-between items-center mb-4">
                    <h2 class="text-lg font-semibold text-gray-700 flex items-center">
                        <i class="fa fa-code mr-2 text-primary"></i> YAML
                    </h2>
                    <button id="clearYaml" class="neumorphic-btn p-2 text-gray-600">
                        <i class="fa fa-trash-o"></i>
                    </button>
                </div>
                <div class="neumorphic-inset p-1">
                    <textarea 
                        id="yamlInput" 
                        class="w-full h-[clamp(300px,50vh,500px)] bg-transparent p-3 focus:outline-none resize-none text-gray-700"
                        placeholder="请输入 YAML 内容..."></textarea>
                </div>
                <div class="mt-4 flex justify-end">
                    <button id="yamlToJson" class="neumorphic-btn px-4 py-2 text-primary font-medium">
                        <i class="fa fa-arrow-right mr-1"></i> 转换为 JSON
                    </button>
                </div>
            </section>
            
            <!-- JSON 输出区域 -->
            <section class="w-full md:w-1/2 neumorphic p-5">
                <div class="flex justify-between items-center mb-4">
                    <h2 class="text-lg font-semibold text-gray-700 flex items-center">
                        <i class="fa fa-file-code-o mr-2 text-secondary"></i> JSON
                    </h2>
                    <button id="copyJson" class="neumorphic-btn p-2 text-gray-600">
                        <i class="fa fa-copy"></i>
                    </button>
                </div>
                <div class="neumorphic-inset p-1">
                    <textarea 
                        id="jsonOutput" 
                        class="w-full h-[clamp(300px,50vh,500px)] bg-transparent p-3 focus:outline-none resize-none text-gray-700"
                        placeholder="转换后的 JSON 将显示在这里..."></textarea>
                </div>
                <div class="mt-4 flex justify-end">
                    <button id="jsonToYaml" class="neumorphic-btn px-4 py-2 text-secondary font-medium">
                        <i class="fa fa-arrow-left mr-1"></i> 转换为 YAML
                    </button>
                </div>
            </section>
        </main>
        
        <!-- 状态提示 -->
        <div id="statusMessage" class="fixed bottom-6 right-6 px-4 py-3 rounded-lg shadow-lg transform translate-y-20 opacity-0 transition-all duration-300"></div>
    </div>

    <script>
        // 获取DOM元素
        const yamlInput = document.getElementById('yamlInput');
        const jsonOutput = document.getElementById('jsonOutput');
        const yamlToJsonBtn = document.getElementById('yamlToJson');
        const jsonToYamlBtn = document.getElementById('jsonToYaml');
        const clearYamlBtn = document.getElementById('clearYaml');
        const copyJsonBtn = document.getElementById('copyJson');
        const statusMessage = document.getElementById('statusMessage');
        
        // 显示状态消息
        function showMessage(message, isError = false) {
            statusMessage.textContent = message;
            statusMessage.className = `fixed bottom-6 right-6 px-4 py-3 rounded-lg shadow-lg transform translate-y-0 opacity-100 transition-all duration-300 ${
                isError ? 'bg-red-100 text-red-700' : 'bg-green-100 text-green-700'
            }`;
            
            setTimeout(() => {
                statusMessage.classList.remove('translate-y-0', 'opacity-100');
                statusMessage.classList.add('translate-y-20', 'opacity-0');
            }, 3000);
        }
        
        // YAML 转 JSON
        yamlToJsonBtn.addEventListener('click', () => {
            try {
                const yaml = yamlInput.value.trim();
                if (!yaml) {
                    showMessage('请输入 YAML 内容', true);
                    return;
                }
                
                const json = jsyaml.load(yaml);
                jsonOutput.value = JSON.stringify(json, null, 2);
                showMessage('转换成功');
            } catch (error) {
                showMessage(`转换失败: ${error.message}`, true);
                console.error(error);
            }
        });
        
        // JSON 转 YAML
        jsonToYamlBtn.addEventListener('click', () => {
            try {
                const json = jsonOutput.value.trim();
                if (!json) {
                    showMessage('请先转换出 JSON 内容', true);
                    return;
                }
                
                const obj = JSON.parse(json);
                yamlInput.value = jsyaml.dump(obj, { indent: 2 });
                showMessage('转换成功');
            } catch (error) {
                showMessage(`转换失败: ${error.message}`, true);
                console.error(error);
            }
        });
        
        // 清空 YAML 输入
        clearYamlBtn.addEventListener('click', () => {
            yamlInput.value = '';
            showMessage('已清空 YAML 输入');
        });
        
        // 复制 JSON 输出
        copyJsonBtn.addEventListener('click', () => {
            const text = jsonOutput.value.trim();
            if (!text) {
                showMessage('没有可复制的内容', true);
                return;
            }
            
            navigator.clipboard.writeText(text).then(() => {
                showMessage('JSON 内容已复制到剪贴板');
            }).catch(err => {
                showMessage('复制失败，请手动复制', true);
                console.error('复制失败:', err);
            });
        });
        
        // 添加键盘快捷键
        document.addEventListener('keydown', (e) => {
            // Ctrl+Enter 转换 YAML 到 JSON
            if (e.ctrlKey && e.key === 'Enter') {
                e.preventDefault();
                yamlToJsonBtn.click();
            }
            // Shift+Enter 转换 JSON 到 YAML
            if (e.shiftKey && e.key === 'Enter') {
                e.preventDefault();
                jsonToYamlBtn.click();
            }
            // Ctrl+C 复制 JSON (仅当输出框有内容且未选中文字时)
            if (e.ctrlKey && e.key === 'c' && jsonOutput.value && !document.getSelection().toString()) {
                e.preventDefault();
                copyJsonBtn.click();
            }
        });
    </script>
</body>
</html>