<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JSON-XML 转换器</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha512-SfTiTlX6kk+qitfevl/7LibUOeJWlt9rbyDn92a1DqWOw9vWG2MFoays0sgObmWazO5BQPiFucnnEAjpAB+/Sw==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    
    <!-- 精简核心转换库 -->
    <script src="library/json_xml_lib.js"></script>
    
    <!-- 配置Tailwind自定义主题 -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#6366f1',
                        secondary: '#8b5cf6',
                        neutral: '#f3f4f6',
                        dark: '#1f2937'
                    },
                    fontFamily: {
                        inter: ['Inter', 'system-ui', 'sans-serif'],
                    },
                    boxShadow: {
                        'neumorphic': '9px 9px 16px rgba(163, 177, 198, 0.6), -9px -9px 16px rgba(255, 255, 255, 0.5)',
                        'neumorphic-inset': 'inset 5px 5px 10px rgba(163, 177, 198, 0.6), inset -5px -5px 10px rgba(255, 255, 255, 0.5)',
                        'neumorphic-sm': '5px 5px 10px rgba(163, 177, 198, 0.6), -5px -5px 10px rgba(255, 255, 255, 0.5)',
                    }
                },
            }
        }
    </script>
    <style type="text/tailwindcss">
        @layer utilities {
            .content-auto {
                content-visibility: auto;
            }
            .neumorphic {
                box-shadow: 9px 9px 16px rgba(163, 177, 198, 0.6), -9px -9px 16px rgba(255, 255, 255, 0.5);
                background-color: #f0f4f8;
                border-radius: 16px;
            }
            .neumorphic-inset {
                box-shadow: inset 5px 5px 10px rgba(163, 177, 198, 0.6), inset -5px -5px 10px rgba(255, 255, 255, 0.5);
                background-color: #f0f4f8;
                border-radius: 12px;
            }
            .neumorphic-btn {
                box-shadow: 5px 5px 10px rgba(163, 177, 198, 0.6), -5px -5px 10px rgba(255, 255, 255, 0.5);
                background-color: #f0f4f8;
                border-radius: 8px;
                transition: all 0.2s ease;
            }
            .neumorphic-btn:hover {
                box-shadow: 7px 7px 14px rgba(163, 177, 198, 0.7), -7px -7px 14px rgba(255, 255, 255, 0.6);
                transform: translateY(-2px);
            }
            .neumorphic-btn:active {
                box-shadow: inset 5px 5px 10px rgba(163, 177, 198, 0.6), inset -5px -5px 10px rgba(255, 255, 255, 0.5);
                transform: translateY(0);
            }
            .text-gradient {
                background-clip: text;
                -webkit-background-clip: text;
                color: transparent;
                background-image: linear-gradient(135deg, #6366f1, #8b5cf6);
            }
        }
    </style>
</head>
<body class="bg-neutral min-h-screen font-inter p-4 md:p-6 lg:p-8">
    <div class="max-w-7xl mx-auto">
        <!-- 标题区域 -->
        <header class="text-center mb-6 md:mb-8">
            <h1 class="text-[clamp(1.5rem,3vw,2rem)] font-bold text-center mb-6 text-primary">JSON-XML 转换器</h1>
            <p class="text-gray-600 mt-2">轻松实现 JSON 与 XML 格式之间的相互转换</p>
        </header>
        
        <!-- 主内容区域 - 保持md断点的左右布局 -->
        <main class="flex flex-col md:flex-row gap-6">
            <!-- JSON 输入区域 -->
            <section class="w-full md:w-1/2 neumorphic p-5">
                <div class="flex justify-between items-center mb-4">
                    <h2 class="text-lg font-semibold text-gray-700 flex items-center">
                        <i class="fa fa-code mr-2 text-primary"></i> JSON
                    </h2>
                    <button id="clearJson" class="neumorphic-btn p-2 text-gray-600">
                        <i class="fa fa-trash-o"></i>
                    </button>
                </div>
                <div class="neumorphic-inset p-1">
                    <textarea 
                        id="jsonInput" 
                        class="w-full h-[clamp(300px,50vh,500px)] bg-transparent p-3 focus:outline-none resize-none text-gray-700"
                        placeholder="请输入 JSON 内容..."></textarea>
                </div>
                <div class="mt-4 flex justify-end">
                    <button id="jsonToXml" class="neumorphic-btn px-4 py-2 text-primary font-medium">
                        <i class="fa fa-arrow-right mr-1"></i> 转换为 XML
                    </button>
                </div>
            </section>
            
            <!-- XML 输出区域 -->
            <section class="w-full md:w-1/2 neumorphic p-5">
                <div class="flex justify-between items-center mb-4">
                    <h2 class="text-lg font-semibold text-gray-700 flex items-center">
                        <i class="fa fa-file-code-o mr-2 text-secondary"></i> XML
                    </h2>
                    <button id="copyXml" class="neumorphic-btn p-2 text-gray-600">
                        <i class="fa fa-copy"></i>
                    </button>
                </div>
                <div class="neumorphic-inset p-1">
                    <textarea 
                        id="xmlOutput" 
                        class="w-full h-[clamp(300px,50vh,500px)] bg-transparent p-3 focus:outline-none resize-none text-gray-700"
                        placeholder="转换后的 XML 将显示在这里..."></textarea>
                </div>
                <div class="mt-4 flex justify-end">
                    <button id="xmlToJson" class="neumorphic-btn px-4 py-2 text-secondary font-medium">
                        <i class="fa fa-arrow-left mr-1"></i> 转换为 JSON
                    </button>
                </div>
            </section>
        </main>
        
        <!-- 状态提示 -->
        <div id="statusMessage" class="fixed bottom-6 right-6 px-4 py-3 rounded-lg shadow-lg transform translate-y-20 opacity-0 transition-all duration-300"></div>
    </div>

    <script>
        // 页面加载完成后初始化
        document.addEventListener('DOMContentLoaded', function() {
            // 获取DOM元素
            const jsonInput = document.getElementById('jsonInput');
            const xmlOutput = document.getElementById('xmlOutput');
            const jsonToXmlBtn = document.getElementById('jsonToXml');
            const xmlToJsonBtn = document.getElementById('xmlToJson');
            const clearJsonBtn = document.getElementById('clearJson');
            const copyXmlBtn = document.getElementById('copyXml');
            const statusMessage = document.getElementById('statusMessage');
            
            // 显示状态消息
            function showMessage(message, isError = false) {
                statusMessage.textContent = message;
                statusMessage.className = `fixed bottom-6 right-6 px-4 py-3 rounded-lg shadow-lg transform translate-y-0 opacity-100 transition-all duration-300 ${
                    isError ? 'bg-red-100 text-red-700' : 'bg-green-100 text-green-700'
                }`;
                
                setTimeout(() => {
                    statusMessage.classList.remove('translate-y-0', 'opacity-100');
                    statusMessage.classList.add('translate-y-20', 'opacity-0');
                }, 3000);
            }
            
            // JSON 转 XML
            jsonToXmlBtn.addEventListener('click', () => {
                try {
                    const json = jsonInput.value.trim();
                    if (!json) {
                        showMessage('请输入 JSON 内容', true);
                        return;
                    }
                    
                    // 解析JSON（使用浏览器内置的JSON解析器）
                    const obj = JSON.parse(json);
                    // 转换为XML格式
                    const xml = XML.stringify(obj, 'data');
                    xmlOutput.value = xml;
                    showMessage('转换成功');
                } catch (error) {
                    showMessage(`转换失败: ${error.message}`, true);
                    console.error(error);
                }
            });
            
            // XML 转 JSON
            xmlToJsonBtn.addEventListener('click', () => {
                try {
                    const xml = xmlOutput.value.trim();
                    if (!xml) {
                        showMessage('请输入 XML 内容', true);
                        return;
                    }
                    
                    // 解析XML为JavaScript对象
                    const obj = XML.parse(xml);
                    // 转换为JSON格式（带缩进）
                    const json = JSON.stringify(obj, null, 2);
                    jsonInput.value = json;
                    showMessage('转换成功');
                } catch (error) {
                    showMessage(`转换失败: ${error.message}`, true);
                    console.error(error);
                }
            });
            
            // 清空输入内容
            clearJsonBtn.addEventListener('click', () => {
                jsonInput.value = '';
                xmlOutput.value = '';
                showMessage('已清空输入内容');
            });
            
            // 复制 XML 输出
            copyXmlBtn.addEventListener('click', () => {
                const text = xmlOutput.value.trim();
                if (!text) {
                    showMessage('没有可复制的内容', true);
                    return;
                }
                
                navigator.clipboard.writeText(text).then(() => {
                    showMessage('XML 内容已复制到剪贴板');
                }).catch(() => {
                    showMessage('复制失败，请手动复制', true);
                });
            });
            
            // 添加键盘快捷键
            document.addEventListener('keydown', (e) => {
                // Ctrl+Enter 转换 JSON 到 XML
                if (e.ctrlKey && e.key === 'Enter') {
                    e.preventDefault();
                    jsonToXmlBtn.click();
}
// Shift+Enter 转换 XML 到 JSON
if (e.shiftKey && e.key === 'Enter') {
e.preventDefault();
xmlToJsonBtn.click();
}
// Ctrl+C 复制 XML (仅当输出框有内容且未选中文字时)
if (e.ctrlKey && e.key === 'c' && xmlOutput.value && !document.getSelection().toString()) {
e.preventDefault();
copyXmlBtn.click();
}
});
});
</script>
</body>
</html>